extends layout

prepend head
  title #{t('panel.')} | #{config.web.name}

append head
  link(rel='stylesheet', href='/style/panel.css')
  for path in style
    link(rel='stylesheet', href=path)

block content
  #content.container
    .row
      #sidenav.col-md-3
        ul.nav.nav-pills.nav-stacked
          li.active
            a(href='/panel/')
              span.glyphicon.pull-right.glyphicon-home
              | #{t('panel.')}
          li
            a(href='/ticket/list/')
              span.glyphicon.pull-right.glyphicon-edit
              | #{t('ticket.')}

      .col-md-9
        .row
          header 财务
          p
            | #{t('plan.balance')}: #{account.attribute.balance.toFixed(2)} #{t('plan.currency.cny')}
            if account.attribute.remaining_time && account.attribute.remaining_time != Infinity && account.attribute.remaining_time != -Infinity
              |  |  #{t('plan.remaining_time')}: #{account.attribute.remaining_time} #{t('time.day')}
          p
            a(href= '/panel/pay/').btn.btn-success 充值

        .row
          header 服务
          table.table.table-hover.plan-list
            tbody
              for plan in plans
                tr(data-name='#{plan.name}')
                  td= plan.t_name
                  td= plan.t_service
                  td= plan.t_resources
                  td
                    if plan.is_enable
                      button.btn.btn-danger.btn-sm 关闭
                    else
                      button.btn.btn-success.btn-sm 开启

        if switch_buttons.length
          #service-switch.row
            header 服务开关
            for name in switch_buttons
              if account.attribute.plugin[name].is_enable
                button(data-name= name).btn.btn-danger 关闭 #{t('plugins.' + name + '.name')}
              else
                button(data-name= name).btn.btn-success 开启 #{t('plugins.' + name + '.name')}

        for widget in widgets
          .row(id='widget-#{widget.plugin.name}')
            != widget.html

append footer
  script(src='/script/panel.js')
  for path in script
    script(src= path)
